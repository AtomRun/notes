# 进程间通信（一）

## 本章目标

- 进程同步与进程互斥
- 进程间通信目的
- 进程间通信发展
- 进程间通信分类
- 进程间共享信息的三种方式
- IPC对象的持续性

## 进程同步和互斥

- 顺序程序特征
  - 顺序性
  - 封闭性: ( 运行环境的封闭性)
  - 确定性
  - 可再现性
- 并发程序特征
  - 共享性
  - 并发性
  - 随机性
- 进程互斥
- 由于各进程要求共享资源，而且有些资源需要互斥使用，因此各进程间竞争使用这些资源，进程的这种关系为进程的互斥
- 系统中某些资源一次只允许一个进程使用，称这样的资源为临界资源或互斥资源。
- 在进程中涉及到互斥资源的程序段叫临界区

![](https://i.loli.net/2020/05/31/1TsiRWp89OmA3US.png)

## 进程同步

![](https://i.loli.net/2020/05/31/6UOyW94uEQsgpFj.png)

指的是多个进程需要相互配合完成任务

## 进程间通信的目的

- 数据传输:一个进程需要将它的数据发送给另一个进程
- 资源共享:多个进程之间共享同样的资源。
- 通知事件: - -个进程需要向另一一个或- -组进程发送消息，通知它(它们)发生了某种事件(如进程终止时要通知父进程)。
- 进程控制:有些进程希望完全控制另一个进程的执行(如Debug进程)，此时控制进程希望能够
  拦截另一个进程的所有陷入和异常，并能够及时知道它的状态改变。

## 进程间通信发展

- 管道
- System V进程间通信
- POSIX进程间通信

## 进程间通信的分类

- 文件
- 文件锁
- 管道(pipe) 和有名管理(FIFO)
- 信号( signal)
- 消息队列
- 共享内存
- 信号量
- 互斥量
- 条件变量
- 读写锁
- 套接字( socket)

## IPC对象的持续性

- 随进程持续:一 直存在直到打开的最后一一个进程结束。(如pipe和FIFO)
- 随内核持续:一直存在直到内核自举或显式删除(如System V消息队列、共享内存、信号量)
- 随文件系统持续:一直存在直到显式删除，即使丙核自举还存在。 ( POSIX消息队列、共享内存、信号量如果是使用映射文件来实现)

![](https://i.loli.net/2020/05/31/9rahl4zBkOWJXUQ.png)