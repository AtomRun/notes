# 权限设计

角色对应权限，权限对应用户

使用jwt来保存用户uid或者其他信息

jwt的时效性：jwt过期之后是需要更换的。

## 无感知二次登录

令牌到期了之后用户需要重新输入用户名和密码，假设jwt有效期7天，七天后就需要重新输入。

假如长时间不使用微信就需要重新输入用户名和密码，这种就是令牌失效了。但是我们在七天内又一次登录了微信，那么jwt令牌时常过长也是有安全问题

## jwt的信息

我们将用户信息和用户ip信息写进去，只有合法，我们才允许访问。先验证是不是jwt然后是不是过期，然后反序列化，拿到uid，根据uid获取角色，查看是否能不能访问当前api。