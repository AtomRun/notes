# 优惠券问题

# 优惠券已过期

优惠券的未使用到已使用，都是有一定的触发机制，比如用户领取了优惠券，然后改变优惠券的状态。

从未使用到已使用就是用户点击了领取

那么过期问题，如何触发呢？

# 触发机制

1. 主动触发，轮询，创建一个线程，每隔一秒扫描数据库的优惠券的表，判断startTime，EndTime的时间是否符合标准，如果不符合，就触发更新修改status
   1. 消耗性能，及时性没法保证
   2. 使用java的Timer，或者spring的schelde
2. 被动触发，寻找一种第三方，每到一个过期时间点就给我们springBoot发一个消息，告诉我们应该修改优惠券的status像是闹钟
   1. redis
   2. RocketMQ
3. STATUS状态一定要被标识出来吗？
4. 即status=3，标识出来就一定可信吗？
   1. 不一定，考虑到绝对性质，例如服务器宕机之类的问题，导致status更新不及时的问题
5. 使用查询时判断startTime和endTime的方式来判断优惠券是否过期

