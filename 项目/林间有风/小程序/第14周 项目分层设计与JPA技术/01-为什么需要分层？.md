# 为什么需要分层

## 分层的目的

1. 在一个大型项目中，每一层都是由不同的开发者或者团队开发，分层可以让每个开发者或者团队各司其职，互不打扰，将问题集中到一层处理，通常也叫水平分割，但是微服务是垂直分割
2. 总体的思想要解决的问题还是OCP，之前讲的是类与类的变化。但是分层也好，微服务也好，是从更大的层面来进行OCP的实现。包括现在的中台，都是OCP的是实现，将所有东西都拆分成一小块，让他们更加利于维护。

## 假设

假设我们现在只有Controller和Service两层，其中Service只有具体的类没有接口，我们现在直接在controller中依赖具体的Service类这样的做法好不好？

不好！层与层之间我们应该依赖接口，interface是一种抽象，他更加灵活，可以实现松耦合，不应该具体的class。这样是为了保证松耦合，可以进行灵活的替换。

## 层与层之间为什么要用interface衔接

1. 因为controller引用的是具体的类，一旦实现类改变了，必定引起controller的变化。但如果controller不是依赖具体的类而是依赖interface接口，无论实现怎么变化，bannerController代码是不会变动的。因为我们controller始终是依赖interface，而interface确定的接口就是byName，这样的话，byName中的逻辑实现，都不会影响controller的代码，因为我们依赖的是接口。说到底还是OCP原则，这就是依赖接口的原因
2. 以上的做法确实是规范，但是写起来确实麻烦。可能大项目中Service包下有很多接口，每个接口对应一个实现类，就有对应多的实现类。